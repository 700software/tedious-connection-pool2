{
  "name": "Tedious-connection-pool",
  "tagline": "A connection pool implementation for tedious",
  "body": "# tedious-connection-pool\r\n[![Dependency Status](https://david-dm.org/tediousjs/tedious-connection-pool.svg)](https://david-dm.org/tediousjs/tedious-connection-pool)\r\n[![npm version](https://badge.fury.io/js/tedious-connection-pool.svg)](https://badge.fury.io/js/tedious-connection-pool)\r\n[![Build status](https://ci.appveyor.com/api/projects/status/jnurb48ao1wrbgbr?svg=true)](https://ci.appveyor.com/project/ben-page/tedious-connection-pool)\r\n\r\n\r\nA connection pool for [tedious](http://github.com/tediousjs/tedious).\r\n\r\n## Installation\r\n\r\n    npm install tedious-connection-pool\r\n    \r\n## Description\r\nThe only difference from the regular tedious API is how the connection is obtained and released. Rather than creating a connection and then closing it when finished, acquire a connection from the pool and release it when finished. Releasing resets the connection and makes in available for another use.\r\n\r\nOnce the Tedious Connection object has been acquired, the tedious API can be used with the connection as normal.\r\n\r\n## Example\r\n\r\n```javascript\r\nvar ConnectionPool = require('tedious-connection-pool');\r\nvar Request = require('tedious').Request;\r\n\r\nvar poolConfig = {\r\n    min: 2,\r\n    max: 4,\r\n    log: true\r\n};\r\n\r\nvar connectionConfig = {\r\n    userName: 'login',\r\n    password: 'password',\r\n    server: 'localhost'\r\n};\r\n\r\n//create the pool\r\nvar pool = new ConnectionPool(poolConfig, connectionConfig);\r\n\r\npool.on('error', function(err) {\r\n    console.error(err);\r\n});\r\n\r\n//acquire a connection\r\npool.acquire(function (err, connection) {\r\n    if (err) {\r\n        console.error(err);\r\n        return;\r\n    }\r\n\r\n    //use the connection as normal\r\n    var request = new Request('select 42', function(err, rowCount) {\r\n        if (err) {\r\n            console.error(err);\r\n            return;\r\n        }\r\n\r\n        console.log('rowCount: ' + rowCount);\r\n\r\n        //release the connection back to the pool when finished\r\n        connection.release();\r\n    });\r\n\r\n    request.on('row', function(columns) {\r\n        console.log('value: ' + columns[0].value);\r\n    });\r\n\r\n    connection.execSql(request);\r\n});\r\n```\r\n\r\nWhen you are finished with the pool, you can drain it (close all connections).\r\n```javascript\r\npool.drain();\r\n```\r\n\r\n\r\n## Class: ConnectionPool\r\n\r\n### new ConnectionPool(poolConfig, connectionConfig)\r\n\r\n* `poolConfig` {Object} the pool configuration object\r\n  * `min` {Number} The minimun of connections there can be in the pool. Default = `10`\r\n  * `max` {Number} The maximum number of connections there can be in the pool. Default = `50`\r\n  * `idleTimeout` {Number} The number of milliseconds before closing an unused connection. Default = `300000`\r\n  * `retryDelay` {Number} The number of milliseconds to wait after a connection fails, before trying again. Default = `5000`\r\n  * `acquireTimeout` {Number} The number of milliseconds to wait for a connection, before returning an error. Default = `60000`\r\n  * `log` {Boolean|Function} Set to true to have debug log written to the console or pass a function to receive the log messages. Default = `undefined`\r\n  \r\n* `connectionConfig` {Object} The same configuration that would be used to [create a\r\n  tedious Connection](https://tediousjs.github.io/tedious/api-connection.html#function_newConnection).\r\n\r\n### connectionPool.acquire(callback)\r\nAcquire a Tedious Connection object from the pool.\r\n\r\n * `callback(err, connection)` {Function} Callback function\r\n  * `err` {Object} An Error object is an error occurred trying to acquire a connection, otherwise null.\r\n  * `connection` {Object} A [Connection](https://tediousjs.github.io/tedious/api-connection.html)\r\n\r\n### connectionPool.drain(callback)\r\nClose all pooled connections and stop making new ones. The pool should be discarded after it has been drained.\r\n * `callback()` {Function} Callback function\r\n\r\n### connectionPool.error {event}\r\nThe 'error' event is emitted when a connection fails to connect to the SQL Server. The pool will simply retry indefinitely. The application may want to handle errors in a more nuanced way.\r\n\r\n## Class: Connection\r\nThe following method is added to the Tedious [Connection](https://tediousjs.github.io/tedious/api-connection.html) object.\r\n\r\n### Connection.release()\r\nRelease the connect back to the pool to be used again\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}